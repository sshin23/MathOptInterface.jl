<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Overview · MathOptInterface</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">MathOptInterface</span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Introduction</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../manual/basic_usage/">Basic usage</a></li><li><a class="tocitem" href="../../../manual/advanced_usage/">Advanced usage</a></li><li><a class="tocitem" href="../../../manual/implementing/">Implementing a solver interface</a></li></ul></li><li><a class="tocitem" href="../../../reference/reference/">API Reference</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Submodules</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Benchmarks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Benchmarks/overview/">Overview</a></li><li><a class="tocitem" href="../../Benchmarks/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Bridges</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Bridges/overview/">Overview</a></li><li><a class="tocitem" href="../../Bridges/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">FileFormats</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../FileFormats/overview/">Overview</a></li><li><a class="tocitem" href="../../FileFormats/reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4-4"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Overview</a><ul class="internal"><li><a class="tocitem" href="#Model"><span>Model</span></a></li><li><a class="tocitem" href="#CachingOptimizer"><span>CachingOptimizer</span></a></li><li><a class="tocitem" href="#Copy-utilities"><span>Copy utilities</span></a></li></ul></li><li><a class="tocitem" href="../reference/">API Reference</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Test</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../Test/overview/">Overview</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Submodules</a></li><li><a class="is-disabled">Utilities</a></li><li class="is-active"><a href>Overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Overview</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jump-dev/MathOptInterface.jl/blob/master/docs/src/submodules/Utilities/overview.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="The-Utilities-submodule"><a class="docs-heading-anchor" href="#The-Utilities-submodule">The Utilities submodule</a><a id="The-Utilities-submodule-1"></a><a class="docs-heading-anchor-permalink" href="#The-Utilities-submodule" title="Permalink"></a></h1><h2 id="Model"><a class="docs-heading-anchor" href="#Model">Model</a><a id="Model-1"></a><a class="docs-heading-anchor-permalink" href="#Model" title="Permalink"></a></h2><p><a href="../reference/#MathOptInterface.Utilities.Model"><code>Utilities.Model</code></a> provides an implementation of a <a href="../../../reference/reference/#MathOptInterface.ModelLike"><code>ModelLike</code></a> that efficiently supports all functions and sets defined within MOI. However, given the extensibility of MOI, this might not cover all use cases.</p><p><a href="../reference/#MathOptInterface.Utilities.UniversalFallback"><code>Utilities.UniversalFallback</code></a> is a layer that sits on top of any <code>ModelLike</code> and provides non-specialized (slower) fallbacks for constraints and attributes that the underlying <code>ModeLike</code> does not support.</p><p>For advanced use cases that need efficient support for functions and sets defined outside of MOI (but still known at compile time), we provide the <a href="../reference/#MathOptInterface.Utilities.@model"><code>Utilities.@model</code></a> macro.</p><h2 id="CachingOptimizer"><a class="docs-heading-anchor" href="#CachingOptimizer">CachingOptimizer</a><a id="CachingOptimizer-1"></a><a class="docs-heading-anchor-permalink" href="#CachingOptimizer" title="Permalink"></a></h2><p>Some solvers do not support incremental definition of optimization models. Nevertheless, you are still able to build incrementally an optimization model with such solvers. MathOptInterface provides a utility, <a href="../reference/#MathOptInterface.Utilities.CachingOptimizer"><code>Utilities.CachingOptimizer</code></a>, that will store in a <a href="../../../reference/reference/#MathOptInterface.ModelLike"><code>ModelLike</code></a> the optimization model during its incremental definition. Once the model is completely defined, the <code>CachingOptimizer</code> specifies all problem information to the underlying solver, all at once.</p><p>The function <a href="../reference/#MathOptInterface.Utilities.state"><code>Utilities.state</code></a> allows to query the state of the optimizer cached inside a <code>CachingOptimizer</code>. The state could be:</p><ul><li><code>NO_OPTIMIZER</code>, if no optimizer is attached;</li><li><code>EMPTY_OPTIMIZER</code>, if the attached optimizer is empty;</li><li><code>ATTACHED_OPTIMIZER</code>, if the attached optimizer is synchronized with the cached model defined in <code>CachingOptimizer</code>.</li></ul><p>The following methods modify the state of the attached optimizer:</p><ul><li><a href="../reference/#MathOptInterface.Utilities.attach_optimizer"><code>Utilities.attach_optimizer</code></a> attachs a new <code>optimizer</code> to a <code>cached_optimizer</code> with state <code>EMPTY_OPTIMIZER</code>. The state of <code>cached_optimizer</code> is set to <code>ATTACHED_OPTIMIZER</code> after the call.</li><li><a href="../reference/#MathOptInterface.Utilities.drop_optimizer"><code>Utilities.drop_optimizer</code></a> drops the underlying <code>optimizer</code> from <code>cached_optimizer</code>, without emptying it. The state of <code>cached_optimizer</code> is set to <code>NO_OPTIMIZER</code> after the call.</li><li><a href="../reference/#MathOptInterface.Utilities.reset_optimizer"><code>Utilities.reset_optimizer</code></a> empties <code>optimizer</code> inside <code>cached_optimizer</code>, without droping it. The state of <code>cached_optimizer</code> is set to <code>EMPTY_OPTIMIZER</code> after the call.</li></ul><p>The way to operate a <code>CachingOptimizer</code> depends whether the mode is set to <code>AUTOMATIC</code> or to <code>MANUAL</code>.</p><ul><li>In <code>MANUAL</code> mode, the state of the <code>CachingOptimizer</code> changes only if the methods <a href="../reference/#MathOptInterface.Utilities.attach_optimizer"><code>Utilities.attach_optimizer</code></a>, <a href="../reference/#MathOptInterface.Utilities.reset_optimizer"><code>Utilities.reset_optimizer</code></a> or <a href="../reference/#MathOptInterface.Utilities.drop_optimizer"><code>Utilities.drop_optimizer</code></a> are being called. Any unattended operation results in an error.</li><li>In <code>AUTOMATIC</code> mode, the state of the <code>CachingOptimizer</code> changes when necessary. Any modification not supported by the solver (e.g. dropping a constraint) results in a drop to the state <code>EMPTY_OPTIMIZER</code>.</li></ul><p>When calling <a href="../reference/#MathOptInterface.Utilities.attach_optimizer"><code>Utilities.attach_optimizer</code></a>, the <code>CachingOptimizer</code> copies the cached model to the optimizer with <a href="../../../reference/reference/#MathOptInterface.copy_to"><code>copy_to</code></a>. We refer to <a href="../../../manual/implementing/#Implementing-copy">Implementing copy</a> for more details.</p><h2 id="Copy-utilities"><a class="docs-heading-anchor" href="#Copy-utilities">Copy utilities</a><a id="Copy-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Copy-utilities" title="Permalink"></a></h2><h3 id="Allocate-Load-API"><a class="docs-heading-anchor" href="#Allocate-Load-API">Allocate-Load API</a><a id="Allocate-Load-API-1"></a><a class="docs-heading-anchor-permalink" href="#Allocate-Load-API" title="Permalink"></a></h3><p>The Allocate-Load API allows solvers that do not support loading the problem incrementally to implement <a href="../../../reference/reference/#MathOptInterface.copy_to"><code>copy_to</code></a> in a way that still allows transformations to be applied in the copy between the cache and the model if the transformations are implemented as MOI layers implementing the Allocate-Load API, see <a href="../../../manual/implementing/#Implementing-copy">Implementing copy</a> for more details.</p><p>Loading a model using the Allocate-Load interface consists of two passes through the model data:</p><ol><li>the allocate pass where the model typically records the necessary information about the constraints and attributes such as their number and size. This information may be used by the solver to allocate datastructures of appropriate size.</li><li>the load pass where the model typically loads the constraint and attribute data to the model.</li></ol><p>The description above only gives a suggestion of what to achieve in each pass. In fact the exact same constraint and attribute data is provided to each pass, so an implementation of the Allocate-Load API is free to do whatever is more convenient in each pass.</p><p>The main difference between each pass, apart from the fact that one is executed before the other during a copy, is that the allocate pass needs to create and return new variable and constraint indices, while during the load pass the appropriate constraint indices are provided.</p><p>The Allocate-Load API is <strong>not</strong> meant to be used outside a copy operation, that is, the interface is not meant to be used to create new constraints with <a href="../reference/#MathOptInterface.Utilities.allocate_constraint"><code>Utilities.allocate_constraint</code></a> followed by <a href="../reference/#MathOptInterface.Utilities.load_constraint"><code>Utilities.load_constraint</code></a> after a solve. This means that the order in which the different functions of the API are called is fixed by <a href="../reference/#MathOptInterface.Utilities.allocate_load"><code>Utilities.allocate_load</code></a> and models implementing the API can rely on the fact that functions will be called in this order. That is, it can be assumed that the different functions will the called in the following order:</p><ol><li><a href="../reference/#MathOptInterface.Utilities.allocate_variables"><code>Utilities.allocate_variables</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.allocate"><code>Utilities.allocate</code></a> and <a href="../reference/#MathOptInterface.Utilities.allocate_constraint"><code>Utilities.allocate_constraint</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.load_variables"><code>Utilities.load_variables</code></a></li><li><a href="../reference/#MathOptInterface.Utilities.load"><code>Utilities.load</code></a> and <a href="../reference/#MathOptInterface.Utilities.load_constraint"><code>Utilities.load_constraint</code></a></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../FileFormats/reference/">« API Reference</a><a class="docs-footer-nextpage" href="../reference/">API Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 9 March 2021 03:27">Tuesday 9 March 2021</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
